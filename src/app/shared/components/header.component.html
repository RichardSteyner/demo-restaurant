<header class="bg-primary text-white shadow-lg">
	<div class="container mx-auto px-4">
		<div class="flex justify-between items-center py-4">
			<!-- Logo -->
			<div class="flex items-center gap-2">
				<span class="text-3xl">üçΩÔ∏è</span>
				<h1 class="text-2xl font-bold">RestaurantPro</h1>
			</div>

			<!-- Desktop Navigation -->
			<nav class="hidden md:flex items-center gap-8">
				<a routerLink="/" routerLinkActive="border-b-2 border-secondary"
					[routerLinkActiveOptions]="{ exact: true }"
					class="hover:text-secondary transition duration-200">Inicio</a>
				<a routerLink="/menu" routerLinkActive="border-b-2 border-secondary"
					class="hover:text-secondary transition duration-200">Men√∫</a>

				<!-- Role-based Dashboard Link (Refined Style) -->
				@if (canAccessDashboard()) {
				<a routerLink="/seller/dashboard" routerLinkActive="bg-white/10"
					class="flex items-center gap-1.5 px-3 py-1.5 rounded-md hover:bg-white/10 text-secondary border border-secondary/30 transition duration-200 font-semibold text-sm">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
						stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
					</svg>
					Panel Vendedor
				</a>
				}

				<a routerLink="/about" routerLinkActive="border-b-2 border-secondary"
					class="hover:text-secondary transition duration-200">Acerca de</a>
				<a routerLink="/contact" routerLinkActive="border-b-2 border-secondary"
					class="hover:text-secondary transition duration-200">Contacto</a>
			</nav>

			<!-- Right Actions (Cart + Profile) -->
			<div class="flex items-center gap-4 lg:gap-6">
				<!-- Cart Icon -->
				<div class="relative">
					<a routerLink="/cart" class="flex items-center gap-2 text-xl hover:text-secondary transition">
						üõí
						@if (cartItemsCount(); as count) {
						@if (count > 0) {
						<span
							class="absolute -top-2 -right-2 bg-secondary text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">
							{{ count }}
						</span>
						}
						}
					</a>
				</div>

				<!-- Profile Dropdown (Unified on the Right) -->
				@if (isAuthenticated()) {
				<div class="relative">
					<button (click)="toggleProfile()"
						class="flex items-center gap-2 bg-white/10 hover:bg-white/20 p-1 rounded-full transition duration-200 pr-3">
						<span
							class="bg-secondary text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shadow-sm">
							{{ currentUser()?.name?.charAt(0) }}
						</span>
						<span class="text-sm font-medium hidden lg:inline">{{ currentUser()?.name }}</span>
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform"
							[class.rotate-180]="isProfileOpen()" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
						</svg>
					</button>

					@if (isProfileOpen()) {
					<div
						class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl py-1 text-gray-800 border border-gray-100 z-50 animate-in fade-in slide-in-from-top-2 duration-200">
						<div class="px-4 py-3 border-b border-gray-100 bg-gray-50/50">
							<p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest leading-tight">
								Sesi√≥n activa</p>
							<p class="text-sm font-bold truncate">{{ currentUser()?.name }}</p>
						</div>
						<a routerLink="/seller/dashboard" (click)="isProfileOpen.set(false)"
							class="block px-4 py-2 text-sm hover:bg-primary hover:text-white transition">Dashboard</a>
						<button (click)="logout()"
							class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition border-t border-gray-100">
							Cerrar Sesi√≥n
						</button>
					</div>
					}
				</div>
				}

				<!-- Mobile Menu Button -->
				<button (click)="toggleMenu()" class="md:hidden text-xl focus:outline-none">
					{{ isMenuOpen() ? '‚úï' : '‚ò∞' }}
				</button>
			</div>
		</div>

		<!-- Mobile Navigation -->
		@if (isMenuOpen()) {
		<nav class="md:hidden pb-4 border-t border-gray-700 animate-in fade-in slide-in-from-top-4">
			<a routerLink="/" (click)="closeMenu()"
				class="block py-3 text-secondary hover:text-white transition border-b border-gray-700/50">Inicio</a>
			<a routerLink="/menu" (click)="closeMenu()"
				class="block py-3 text-secondary hover:text-white transition border-b border-gray-700/50">Men√∫</a>

			@if (canAccessDashboard()) {
			<a routerLink="/seller/dashboard" (click)="closeMenu()"
				class="block py-3 text-white bg-white/10 px-2 rounded-md my-2 transition font-bold flex items-center gap-2">
				üìä Panel Vendedor
			</a>
			}

			<a routerLink="/about" (click)="closeMenu()"
				class="block py-3 text-secondary hover:text-white transition border-b border-gray-700/50">Acerca de</a>
			<a routerLink="/contact" (click)="closeMenu()"
				class="block py-3 text-secondary hover:text-white transition border-b border-gray-700/50">Contacto</a>

			@if (isAuthenticated()) {
			<div class="mt-4 pt-4 border-t-2 border-secondary/30">
				<div class="flex items-center gap-3 px-2 mb-4">
					<span
						class="bg-secondary text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">
						{{ currentUser()?.name?.charAt(0) }}
					</span>
					<div>
						<p class="text-white font-bold leading-none">{{ currentUser()?.name }}</p>
						<p class="text-[10px] text-secondary mt-1 uppercase tracking-wider">{{ currentUser()?.role }}
						</p>
					</div>
				</div>
				<button (click)="logout(); closeMenu()"
					class="w-full text-left py-3 text-red-400 hover:text-red-300 transition font-bold">
					Cerrar Sesi√≥n
				</button>
			</div>
			}
		</nav>
		}

	</div>
</header>